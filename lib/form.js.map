{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 5b84b31702275b2437cf","webpack:///./src/index.js"],"names":["FEEDBACK_STATUS_SUCCESS","FEEDBACK_STATUS_WARNING","FEEDBACK_STATUS_ERROR","Form","isLoading","$form","$","$feedback","$progress","noValidate","addEventListener","_submitListener","_resetListener","action","opts","Promise","resolve","reject","request","XMLHttpRequest","currentRequest","base","eventHub","trigger","withCredentials","open","method","h","headers","hasOwnProperty","setRequestHeader","onload","onerror","onabort","ontimeout","upload","onprogress","_onProgress","send","body","then","e","target","status","error","Error","statusText","response","json","JSON","parse","responseText","msg","type","innerHTML","classList","add","options","feedbackClassWarning","feedbackClassError","feedbackClassSuccess","remove","$$formFields","$$","formFieldClass","forEach","$field","$message","querySelector","formFieldMessageElement","formFieldMessageClass","formFieldClassError","parentNode","removeChild","progressClassShow","setProgress","percentage","showProgress","hideProgressOnEnd","percentageRounded","Math","ceil","$loaded","$percentage","style","width","textContent","errors","name","fieldErrors","getFieldErrors","call","getErrorField","document","createElement","appendChild","$text","formData","FormData","lengthComputable","loaded","total","abort","resetProgress","resetFeedback","resetValidation","preventDefault","_createFormData","getAttribute","node","classLoading","fetch","success","showFeedback","message","defaultSuccessMessage","removeFormOnSuccess","scroller","window","setTimeout","toElement","findFieldErrors","displayFieldErrors","defaultErrorMessage","catch","err","features","Feature","defaultOptions","$input","closest"],"mappings":"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","file":"form.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"form\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"form\"] = factory();\n\telse\n\t\troot[\"form\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5b84b31702275b2437cf","\nconst FEEDBACK_STATUS_SUCCESS = 0\nconst FEEDBACK_STATUS_WARNING = 1\nconst FEEDBACK_STATUS_ERROR = 2\n\n/**\n * Form feature class.\n */\nclass Form extends base.features.Feature {\n\n  init() {\n    this.isLoading = false\n\n    this.$form = this.$('form')\n    this.$feedback = this.$('[data-feedback]')\n    this.$progress = this.$('[data-progress]')\n\n    this.$form.noValidate = true\n\n    this.addEventListener(this.$form, 'submit', this._submitListener())\n    this.addEventListener(this.$form, 'reset', this._resetListener())\n  }\n\n  fetch(action, opts) {\n    return new Promise((resolve, reject) => {\n      let request = new XMLHttpRequest()\n      this.currentRequest = request\n\n      base.eventHub.trigger('form:beforeSend', opts, request)\n      this.trigger('beforeSend', opts, request)\n\n      request.withCredentials = true\n      request.open(opts.method || 'post', action)\n\n      for (let h in opts.headers || {}) {\n        if (opts.headers.hasOwnProperty(h)) {\n          request.setRequestHeader(h, opts.headers[h])\n        }\n      }\n\n      request.onload = resolve\n      request.onerror = reject\n      request.onabort = reject\n      request.ontimeout = reject\n\n      if (this.$progress && request.upload) {\n        request.upload.onprogress = this._onProgress()\n      }\n\n      request.send(opts.body)\n    }).then((e) => {\n      this.currentRequest = null\n\n      let request = e.target\n\n      if (request.status >= 200 && request.status < 300) {\n        return e\n      } else {\n        let error = new Error(request.statusText)\n        error.response = e\n        throw error\n      }\n    }).then((e) => {\n      let request = e.target\n      let json = JSON.parse(request.responseText)\n\n      return { json, request }\n    })\n  }\n\n  showFeedback(msg, type = FEEDBACK_STATUS_SUCCESS) {\n    this.$feedback.innerHTML = msg\n\n    switch (type) {\n      case FEEDBACK_STATUS_WARNING:\n        this.$feedback.classList.add(this.options.feedbackClassWarning)\n        break\n      case FEEDBACK_STATUS_ERROR:\n        this.$feedback.classList.add(this.options.feedbackClassError)\n        break\n      case FEEDBACK_STATUS_SUCCESS:\n      default:\n        this.$feedback.classList.add(this.options.feedbackClassSuccess)\n    }\n  }\n\n  resetFeedback() {\n    this.$feedback.innerHTML = ''\n    this.$feedback.classList.remove(this.options.feedbackClassWarning)\n    this.$feedback.classList.remove(this.options.feedbackClassError)\n    this.$feedback.classList.remove(this.options.feedbackClassSuccess)\n  }\n\n  resetValidation() {\n    let $$formFields = this.$$(`.${this.options.formFieldClass}`)\n\n    $$formFields.forEach(($field) => {\n      let $message = $field.querySelector(`${this.options.formFieldMessageElement}.${this.options.formFieldMessageClass}`)\n      $field.classList.remove(this.options.formFieldClassError)\n\n      if ($message) {\n        $message.parentNode.removeChild($message)\n      }\n    })\n  }\n\n  resetProgress() {\n    if (!this.$progress) return\n    this.$progress.classList.remove(this.options.progressClassShow)\n    this.setProgress(0)\n  }\n\n  setProgress(percentage) {\n    if (!this.$progress || !this.options.showProgress) return\n\n    if (percentage === 0\n        || percentage === 1 && this.options.hideProgressOnEnd\n    ) {\n      this.$progress.classList.remove(this.options.progressClassShow)\n    } else {\n      this.$progress.classList.add(this.options.progressClassShow)\n    }\n\n    percentage = percentage * 100\n    let percentageRounded = Math.ceil(percentage)\n\n    let $loaded = this.$progress.querySelector('[data-loaded]')\n    let $percentage = this.$progress.querySelector('[data-percentage]')\n\n    $loaded.style.width = `${percentageRounded}%`\n    $percentage.textContent = `${percentageRounded}%`\n  }\n\n  displayFieldErrors(errors) {\n    for (let name in errors) {\n      if (errors.hasOwnProperty(name)) {\n        let fieldErrors = this.options.getFieldErrors.call(this, name, errors)\n        let $field = this.options.getErrorField.call(this, name)\n\n        if ($field) {\n          $field.classList.add(this.options.formFieldClassError)\n          let $message = $field.querySelector(`${this.options.formFieldMessageElement}.${this.options.formFieldMessageClass}`)\n\n          if (!$message) {\n            $message = document.createElement(this.options.formFieldMessageElement)\n            $message.classList.add(this.options.formFieldMessageClass)\n            $field.appendChild($message)\n          }\n\n          $message.innerHTML = ''\n\n          let $text = document.createElement('span')\n          $text.textContent = fieldErrors[0]\n\n          $message.appendChild($text)\n        }\n      }\n    }\n  }\n\n  _createFormData() {\n    let formData = new FormData(this.$form)\n    return formData\n  }\n\n  _onProgress() {\n    return (e) => {\n      if (e.lengthComputable) {\n        this.setProgress(e.loaded / e.total)\n      }\n    }\n  }\n\n  _resetListener() {\n    return () => {\n      if (this.currentRequest) {\n        this.currentRequest.abort()\n      }\n\n      this.resetProgress()\n      this.resetFeedback()\n      this.resetValidation()\n    }\n  }\n\n  _submitListener() {\n    return (e) => {\n      e.preventDefault()\n      if (this.isLoading) return\n\n      this.isLoading = true\n\n      let formData = this._createFormData()\n      let action = this.$form.getAttribute('action')\n      let method = this.$form.getAttribute('method')\n\n      this.resetProgress()\n      this.resetFeedback()\n      this.resetValidation()\n\n      this.node.classList.add(this.options.classLoading)\n\n      this.fetch(action, {\n        body: formData,\n        method: method\n      }).then((response) => {\n        base.eventHub.trigger('form:send', response)\n        this.trigger('send', response)\n\n        this.isLoading = false\n        this.node.classList.remove(this.options.classLoading)\n\n        if (response.json.success) {\n          base.eventHub.trigger('form:sendSuccess', response)\n          this.trigger('sendSuccess', response)\n\n          this.showFeedback(response.json.message || this.options.defaultSuccessMessage)\n\n          if (this.options.removeFormOnSuccess) {\n            this.$form.parentNode.removeChild(this.$form)\n\n            if (this.options.scroller) {\n              window.setTimeout(() => {\n                this.options.scroller.toElement(this.$feedback || this.node)\n              }, 0)\n            }\n          }\n        } else {\n          base.eventHub.trigger('form:sendError', response)\n          this.trigger('sendError', response)\n\n          let errors = this.options.findFieldErrors(response.json)\n\n          if (errors) {\n            this.displayFieldErrors(errors)\n\n            if (response.json.message) {\n              this.showFeedback(response.json.message, FEEDBACK_STATUS_ERROR)\n            }\n          } else {\n            this.showFeedback(response.json.message || this.options.defaultErrorMessage, FEEDBACK_STATUS_ERROR)\n          }\n        }\n      }).catch((err) => {\n        this.isLoading = false\n        this.node.classList.remove(this.options.classLoading)\n\n        if (err.type && err.type !== 'abort') {\n          this.showFeedback(this.options.defaultErrorMessage, FEEDBACK_STATUS_SUCCESS)\n          throw err\n        }\n      })\n    }\n  }\n\n}\n\n/**\n * Default feature options.\n */\nForm.defaultOptions = {\n  scroller: null,\n  defaultSuccessMessage: 'Nachricht wurde erfolgreich versendet!',\n  defaultErrorMessage: 'Beim Senden der Nachricht ist ein Fehler aufgetreten!',\n  classLoading: '-loading',\n  removeFormOnSuccess: true,\n  showProgress: true,\n  hideProgressOnEnd: true,\n  progressClassShow: '-show',\n  formFieldClass: 'form-field',\n  formFieldClassError: '-error',\n  formFieldMessageElement: 'div',\n  formFieldMessageClass: 'message',\n  feedbackClassSuccess: '-success',\n  feedbackClassWarning: '-warning',\n  feedbackClassError: '-error',\n  findFieldErrors: function(json) {\n    return json.errors\n  },\n  getErrorField: function(name) {\n    let $input = this.$form.querySelector(`[name=\"fields[${name}]\"]`)\n    if (!$input) return null\n    return $input.closest(`.${this.options.formFieldClass}`)\n  },\n  getFieldErrors: function(name, errors) {\n    return errors[name]\n  }\n}\n\nexport default Form\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}